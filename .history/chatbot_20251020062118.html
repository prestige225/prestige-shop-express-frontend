<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistant IA - Prestige Shop Express</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
        }
        
        /* Animation du chatbot */
        @keyframes slideUp {
            from {
                transform: translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .chat-container {
            animation: slideUp 0.3s ease-out;
        }
        
        .chat-button {
            animation: bounce 2s infinite;
        }
        
        .chat-button:hover {
            animation: none;
        }
        
        /* Animation des messages */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .message {
            animation: fadeIn 0.3s ease-out;
        }
        
        /* Animation de typing */
        .typing-indicator {
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: #9333ea;
            border-radius: 50%;
            animation: typingDot 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typingDot {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
        
        /* Scrollbar personnalisÃ©e */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        
        .chat-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .chat-messages::-webkit-scrollbar-thumb {
            background: #9333ea;
            border-radius: 10px;
        }
        
        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: #7c3aed;
        }
    </style>
</head>
<body class="bg-gray-100">
    
    <!-- Bouton du chatbot flottant -->
    <div id="chat-button" class="chat-button fixed bottom-6 right-6 z-50">
        <button onclick="toggleChat()" class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white w-16 h-16 rounded-full shadow-2xl flex items-center justify-center transition-all transform hover:scale-110">
            <i class="fas fa-robot text-2xl"></i>
        </button>
        <!-- Badge de notification -->
        <span id="notification-badge" class="hidden absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center">
            1
        </span>
    </div>

    <!-- FenÃªtre du chatbot -->
    <div id="chat-container" class="hidden chat-container fixed bottom-24 right-6 w-96 h-[600px] bg-white rounded-2xl shadow-2xl z-50 flex flex-col overflow-hidden">
        
        <!-- Header -->
        <div class="bg-gradient-to-r from-purple-600 to-blue-600 p-4 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <div class="w-12 h-12 bg-white rounded-full flex items-center justify-center">
                    <i class="fas fa-robot text-purple-600 text-xl"></i>
                </div>
                <div>
                    <h3 class="text-white font-bold">Assistant IA</h3>
                    <p class="text-white text-xs opacity-90">
                        <span class="inline-block w-2 h-2 bg-green-400 rounded-full mr-1"></span>
                        En ligne
                    </p>
                </div>
            </div>
            <button onclick="toggleChat()" class="text-white hover:bg-white hover:bg-opacity-20 w-8 h-8 rounded-full flex items-center justify-center transition-all">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Messages -->
        <div id="chat-messages" class="chat-messages flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50">
            <!-- Message de bienvenue -->
            <div class="message flex items-start space-x-2">
                <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-robot text-white text-sm"></i>
                </div>
                <div class="bg-white rounded-2xl rounded-tl-none p-3 shadow-md max-w-[80%]">
                    <p class="text-gray-800 text-sm">
                        ðŸ‘‹ Bonjour ! Je suis votre assistant virtuel. Comment puis-je vous aider aujourd'hui ?
                    </p>
                </div>
            </div>
        </div>

        <!-- Suggestions rapides -->
        <div id="quick-suggestions" class="p-3 bg-white border-t border-gray-200">
            <p class="text-xs text-gray-500 mb-2">Suggestions :</p>
            <div class="flex flex-wrap gap-2">
                <button onclick="sendQuickMessage('Voir les produits')" class="text-xs bg-purple-100 text-purple-700 px-3 py-1 rounded-full hover:bg-purple-200 transition-colors">
                    ðŸ“¦ Voir les produits
                </button>
                <button onclick="sendQuickMessage('Suivre ma commande')" class="text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded-full hover:bg-blue-200 transition-colors">
                    ðŸšš Suivre commande
                </button>
                <button onclick="sendQuickMessage('Aide')" class="text-xs bg-green-100 text-green-700 px-3 py-1 rounded-full hover:bg-green-200 transition-colors">
                    ðŸ’¡ Aide
                </button>
            </div>
        </div>

        <!-- Input -->
        <div class="p-4 bg-white border-t border-gray-200">
            <div class="flex items-center space-x-2">
                <input 
                    type="text" 
                    id="chat-input" 
                    placeholder="Tapez votre message..." 
                    class="flex-1 border border-gray-300 rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm"
                    onkeypress="handleKeyPress(event)"
                >
                <button onclick="sendMessage()" class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white w-10 h-10 rounded-full flex items-center justify-center transition-all transform hover:scale-110">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Configuration de l'assistant
        const ASSISTANT_CONFIG = {
            name: "Assistant Prestige Shop",
            welcomeMessage: "Bienvenue sur Prestige Shop Express ! ðŸŽ‰",
            typing_delay: 1000
        };

        // Base de connaissances de l'assistant
        const knowledgeBase = {
            // Salutations
            greetings: {
                patterns: ['bonjour', 'salut', 'hello', 'hi', 'bonsoir', 'coucou'],
                responses: [
                    "Bonjour ! ðŸ‘‹ Comment puis-je vous aider aujourd'hui ?",
                    "Salut ! Je suis lÃ  pour vous aider. Que cherchez-vous ?",
                    "Bonjour ! Bienvenue sur Prestige Shop Express. En quoi puis-je vous Ãªtre utile ?"
                ]
            },
            
            // Produits
            products: {
                patterns: ['produit', 'article', 'voir', 'catalogue', 'acheter', 'vendre'],
                responses: [
                    "ðŸ›ï¸ Nous avons une large sÃ©lection de produits de qualitÃ© ! Vous pouvez parcourir notre catalogue sur la page d'accueil. Cherchez-vous quelque chose en particulier ?",
                    "ðŸ“¦ Notre boutique propose des produits variÃ©s. Consultez notre page principale pour voir tous nos articles disponibles !",
                    "âœ¨ DÃ©couvrez nos produits de prestige ! Rendez-vous sur la page d'accueil pour explorer notre collection."
                ]
            },
            
            // Commandes
            orders: {
                patterns: ['commande', 'commander', 'acheter', 'panier', 'livraison', 'suivre'],
                responses: [
                    "ðŸšš Pour passer commande, ajoutez simplement les produits Ã  votre panier et cliquez sur 'Commander'. Vous serez redirigÃ© vers WhatsApp pour finaliser.\n\nConnectez-vous pour suivre vos commandes dans la section 'Mes Commandes' !",
                    "ðŸ“± Le processus est simple : Panier â†’ Commander â†’ WhatsApp â†’ Livraison !\n\nVous Ãªtes connectÃ© ? Vous pouvez voir toutes vos commandes dans votre profil.",
                    "ðŸŽ¯ Pour commander : Choisissez vos produits, validez votre panier, et confirmez par WhatsApp. C'est rapide et sÃ©curisÃ© !"
                ]
            },
            
            // Connexion
            account: {
                patterns: ['connexion', 'compte', 'profil', 'inscription', 'connecter', 'crÃ©er compte'],
                responses: [
                    "ðŸ‘¤ Vous pouvez vous connecter ou crÃ©er un compte en cliquant sur le bouton 'Connexion' en haut de la page.\n\nAvec un compte, vous pouvez suivre vos commandes et profiter d'une expÃ©rience personnalisÃ©e !",
                    "ðŸ” CrÃ©ez votre compte gratuitement pour accÃ©der Ã  l'historique de vos commandes et commander plus rapidement !",
                    "âœ… Cliquez sur 'Connexion' pour vous identifier ou crÃ©er un nouveau compte en quelques secondes."
                ]
            },
            
            // Prix et paiement
            payment: {
                patterns: ['prix', 'payer', 'paiement', 'coÃ»t', 'combien', 'tarif'],
                responses: [
                    "ðŸ’° Les prix sont affichÃ©s en FCFA sur chaque produit. Le paiement se fait Ã  la livraison ou selon les modalitÃ©s convenues par WhatsApp.",
                    "ðŸ’µ Tous nos prix sont en Francs CFA. Vous verrez le prix total dans votre panier avant de commander.",
                    "ðŸ·ï¸ Les tarifs varient selon les produits. Consultez notre catalogue pour voir les prix dÃ©taillÃ©s !"
                ]
            },
            
            // Aide gÃ©nÃ©rale
            help: {
                patterns: ['aide', 'help', 'comment', 'question', 'problÃ¨me', 'soucis'],
                responses: [
                    "ðŸ’¡ Je peux vous aider avec :\nâ€¢ Voir les produits\nâ€¢ Passer une commande\nâ€¢ CrÃ©er un compte\nâ€¢ Suivre une livraison\nâ€¢ Questions sur les prix\n\nQue souhaitez-vous savoir ?",
                    "ðŸ¤ Je suis lÃ  pour vous ! Posez-moi des questions sur nos produits, comment commander, crÃ©er un compte, ou tout autre sujet.",
                    "ðŸ“ž Besoin d'aide ? Je peux vous renseigner sur :\nâœ“ Nos produits\nâœ“ Comment commander\nâœ“ Votre compte\nâœ“ Le suivi de livraison\n\nQue voulez-vous savoir ?"
                ]
            },
            
            // Contact
            contact: {
                patterns: ['contact', 'tÃ©lÃ©phone', 'whatsapp', 'email', 'joindre'],
                responses: [
                    "ðŸ“± Vous pouvez nous contacter directement via WhatsApp en passant une commande, ou via les informations de contact sur le site.",
                    "ðŸ’¬ Notre Ã©quipe est disponible sur WhatsApp ! Passez une commande et vous serez en contact direct avec nous.",
                    "ðŸ“ž Pour nous joindre, utilisez notre systÃ¨me de commande WhatsApp intÃ©grÃ© !"
                ]
            },
            
            // Au revoir
            goodbye: {
                patterns: ['au revoir', 'bye', 'merci', 'adieu', 'Ã  bientÃ´t'],
                responses: [
                    "Au revoir ! ðŸ‘‹ N'hÃ©sitez pas Ã  revenir si vous avez des questions. Bonne journÃ©e !",
                    "Merci de votre visite ! ðŸ˜Š Ã€ trÃ¨s bientÃ´t sur Prestige Shop Express !",
                    "Ã€ bientÃ´t ! ðŸŽ‰ Nous sommes toujours lÃ  pour vous aider !"
                ]
            }
        };

        // Ã‰tat du chat
        let chatState = {
            isOpen: false,
            messageCount: 0
        };

        // Toggle du chat
        function toggleChat() {
            const container = document.getElementById('chat-container');
            const button = document.getElementById('chat-button');
            const badge = document.getElementById('notification-badge');
            
            chatState.isOpen = !chatState.isOpen;
            
            if (chatState.isOpen) {
                container.classList.remove('hidden');
                badge.classList.add('hidden');
                scrollToBottom();
                document.getElementById('chat-input').focus();
            } else {
                container.classList.add('hidden');
            }
        }

        // Envoyer un message
        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Afficher le message de l'utilisateur
            addMessage(message, 'user');
            input.value = '';
            
            // Montrer l'indicateur de typing
            showTypingIndicator();
            
            // RÃ©pondre aprÃ¨s un dÃ©lai
            setTimeout(() => {
                hideTypingIndicator();
                const response = generateResponse(message);
                addMessage(response, 'bot');
            }, ASSISTANT_CONFIG.typing_delay);
        }

        // Message rapide
        function sendQuickMessage(message) {
            document.getElementById('chat-input').value = message;
            sendMessage();
        }

        // GÃ©rer la touche Enter
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Ajouter un message
        function addMessage(text, sender) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message flex items-start space-x-2';
            
            if (sender === 'user') {
                messageDiv.classList.add('flex-row-reverse', 'space-x-reverse');
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-user text-white text-sm"></i>
                    </div>
                    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl rounded-tr-none p-3 shadow-md max-w-[80%]">
                        <p class="text-sm">${text}</p>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-robot text-white text-sm"></i>
                    </div>
                    <div class="bg-white rounded-2xl rounded-tl-none p-3 shadow-md max-w-[80%]">
                        <p class="text-gray-800 text-sm whitespace-pre-line">${text}</p>
                    </div>
                `;
            }
            
            messagesContainer.appendChild(messageDiv);
            chatState.messageCount++;
            scrollToBottom();
        }

        // Indicateur de typing
        function showTypingIndicator() {
            const messagesContainer = document.getElementById('chat-messages');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'message flex items-start space-x-2';
            typingDiv.innerHTML = `
                <div class="w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center flex-shrink-0">
                    <i class="fas fa-robot text-white text-sm"></i>
                </div>
                <div class="bg-white rounded-2xl rounded-tl-none p-3 shadow-md">
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            messagesContainer.appendChild(typingDiv);
            scrollToBottom();
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typing-indicator');
            if (indicator) {
                indicator.remove();
            }
        }

        // GÃ©nÃ©rer une rÃ©ponse
        function generateResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            // Chercher dans la base de connaissances
            for (const [category, data] of Object.entries(knowledgeBase)) {
                for (const pattern of data.patterns) {
                    if (message.includes(pattern)) {
                        // Retourner une rÃ©ponse alÃ©atoire
                        const responses = data.responses;
                        return responses[Math.floor(Math.random() * responses.length)];
                    }
                }
            }
            
            // RÃ©ponse par dÃ©faut
            return "ðŸ¤” Je ne suis pas sÃ»r de comprendre. Voici ce que je peux faire pour vous :\n\nâ€¢ Renseigner sur nos produits\nâ€¢ Aider avec les commandes\nâ€¢ Expliquer comment crÃ©er un compte\nâ€¢ Donner des infos sur les livraisons\n\nEssayez de reformuler votre question ou cliquez sur une suggestion ! ðŸ˜Š";
        }

        // Scroll vers le bas
        function scrollToBottom() {
            const messagesContainer = document.getElementById('chat-messages');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Afficher une notification quand le chat est fermÃ©
        function showNotification() {
            if (!chatState.isOpen) {
                document.getElementById('notification-badge').classList.remove('hidden');
            }
        }

        // Initialisation
        window.onload = function() {
            // Afficher une notification aprÃ¨s 5 secondes si l'utilisateur n'a pas ouvert le chat
            setTimeout(() => {
                if (!chatState.isOpen) {
                    showNotification();
                }
            }, 5000);
        };
    </script>
</body>
</html>
