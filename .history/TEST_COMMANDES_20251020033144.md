# ğŸ§ª Guide de Test - SystÃ¨me de Commandes

## âœ… PrÃ©paration

### 1. **VÃ©rifier que la table existe**
Dans MySQL Workbench :
```sql
DESCRIBE commandes;
SELECT COUNT(*) FROM commandes;
```

### 2. **DÃ©marrer le serveur**
```bash
cd "c:\Users\RCK COMPUTERS\Desktop\new work\prestige shop express"
python server_fixed.py
```

Vous devriez voir :
```
ğŸš€ DÃ©marrage du serveur Flask corrigÃ©...
ğŸ” Test de connexion Ã  la base de donnÃ©es...
âœ… Connexion MySQL rÃ©ussie
âœ… Base de donnÃ©es accessible
ğŸŒ Serveur disponible sur http://localhost:5000
```

---

## ğŸ¯ Test Complet : Passer une Commande

### **Ã‰tape 1 : Ouvrir le site**
```
http://localhost:5000/index.html
```

### **Ã‰tape 2 : Se connecter** âš ï¸ **IMPORTANT**
1. Cliquer sur "Connexion" dans le header
2. Se connecter avec vos identifiants
3. VÃ©rifier que votre nom apparaÃ®t en haut Ã  droite

**Si vous n'Ãªtes PAS connectÃ© :**
- âš ï¸ La commande ne sera PAS enregistrÃ©e en base de donnÃ©es
- âœ… Mais WhatsApp fonctionnera quand mÃªme

### **Ã‰tape 3 : Ajouter des produits au panier**
1. Parcourir les produits
2. Cliquer sur "Ajouter au panier" sur 2-3 produits
3. VÃ©rifier le badge du panier qui affiche le nombre d'articles

### **Ã‰tape 4 : Ouvrir le panier**
1. Cliquer sur l'icÃ´ne panier ğŸ›’ en haut Ã  droite
2. VÃ©rifier que vos produits sont listÃ©s
3. Ajuster les quantitÃ©s si besoin

### **Ã‰tape 5 : Remplir le formulaire de commande**
Remplir TOUS les champs :
- **Nom complet** : Jean Dupont
- **TÃ©lÃ©phone** : 0758415088
- **Adresse** : Cocody AngrÃ© 7Ã¨me Tranche
- **Ville** : Abidjan

### **Ã‰tape 6 : Valider la commande**
1. Cliquer sur "Valider la commande"
2. **Observer les notifications** :
   - âœ… "Commande CMD-... enregistrÃ©e !" (si connectÃ©)
   - âš ï¸ "Connectez-vous pour sauvegarder vos commandes" (si non connectÃ©)

### **Ã‰tape 7 : Ouvrir la console navigateur (F12)**
Dans l'onglet "Console", vous devriez voir :
```javascript
ğŸ“¤ Envoi de la commande au serveur... {user_id: 1, montant_total: 45000, ...}
âœ… Commande enregistrÃ©e dans MySQL: CMD-20251020153045-789
```

### **Ã‰tape 8 : WhatsApp s'ouvre automatiquement**
- Le message de commande est prÃ©-rempli
- Cliquez sur "Envoyer" pour envoyer la commande

---

## ğŸ” VÃ©rifications

### **1. VÃ©rifier dans la console du serveur Flask**
Vous devriez voir :
```
POST /api/commandes
ğŸ“ CrÃ©ation de commande
âœ… Commande crÃ©Ã©e avec ID: 15
```

### **2. VÃ©rifier dans MySQL Workbench**
```sql
-- DerniÃ¨re commande
SELECT * FROM commandes ORDER BY date_commande DESC LIMIT 1;

-- VÃ©rifier toutes les informations
SELECT 
    c.id,
    c.numero_commande,
    c.date_commande,
    c.montant_total,
    c.adresse_livraison,
    c.telephone,
    c.statut,
    c.notes,
    u.nom,
    u.prenom,
    u.email
FROM commandes c
JOIN users u ON c.user_id = u.id
ORDER BY c.date_commande DESC;
```

### **3. VÃ©rifier dans l'interface admin**
```
http://localhost:5000/admin_commandes.html
```

Vous devriez voir :
- âœ… Votre commande dans la liste
- âœ… Statut "En Attente"
- âœ… Toutes les informations affichÃ©es

---

## ğŸ“Š Test des FonctionnalitÃ©s Admin

### **1. Ouvrir l'admin des commandes**
```
http://localhost:5000/admin_commandes.html
```

### **2. Tester les statistiques**
VÃ©rifier que les 4 cartes affichent :
- Total Commandes
- En Attente
- En Cours
- LivrÃ©es

### **3. Tester la recherche**
- Taper le numÃ©ro de commande
- Taper le nom du client
- VÃ©rifier que les rÃ©sultats se filtrent

### **4. Tester les filtres**
- SÃ©lectionner "En Attente" dans le dropdown
- VÃ©rifier que seules les commandes en attente s'affichent

### **5. Voir les dÃ©tails**
- Cliquer sur l'icÃ´ne ğŸ‘ï¸
- VÃ©rifier toutes les informations dans le modal

### **6. Changer le statut**
- Cliquer sur l'icÃ´ne â¡ï¸
- Confirmer le changement
- VÃ©rifier que le statut passe de "En Attente" Ã  "En Cours"
- Cliquer encore sur â¡ï¸
- VÃ©rifier que le statut passe Ã  "LivrÃ©e"

### **7. Supprimer une commande**
- Cliquer sur l'icÃ´ne ğŸ—‘ï¸
- Confirmer la suppression
- VÃ©rifier que la commande disparaÃ®t

---

## ğŸ§ª Tests d'Erreurs

### **Test 1 : Panier vide**
1. Vider le panier
2. Cliquer sur "Valider la commande"
3. **RÃ©sultat attendu** : âŒ "Votre panier est vide"

### **Test 2 : Champs non remplis**
1. Ajouter des produits
2. Ne PAS remplir le formulaire
3. Cliquer sur "Valider la commande"
4. **RÃ©sultat attendu** : âŒ "Veuillez remplir tous les champs obligatoires"

### **Test 3 : Utilisateur non connectÃ©**
1. Se dÃ©connecter
2. Ajouter des produits
3. Remplir le formulaire
4. Valider la commande
5. **RÃ©sultats attendus** :
   - âš ï¸ "Connectez-vous pour sauvegarder vos commandes"
   - âœ… WhatsApp s'ouvre quand mÃªme
   - âŒ Commande NON enregistrÃ©e en BDD

### **Test 4 : Serveur Flask arrÃªtÃ©**
1. ArrÃªter le serveur Flask (Ctrl+C)
2. Essayer de passer une commande
3. **RÃ©sultats attendus** :
   - âš ï¸ "Serveur inaccessible, commande envoyÃ©e sur WhatsApp"
   - âœ… WhatsApp s'ouvre quand mÃªme
   - âŒ Commande NON enregistrÃ©e en BDD

---

## ğŸ“ˆ ScÃ©nario Complet de Bout en Bout

```
1. Client : Visite http://localhost:5000/index.html
   â†“
2. Client : Se connecte avec son compte
   â†“
3. Client : Parcourt les produits
   â†“
4. Client : Ajoute 3 produits au panier
   â†“
5. Client : Ouvre le panier
   â†“
6. Client : Remplit le formulaire de commande
   â†“
7. Client : Clique sur "Valider la commande"
   â†“
8. SystÃ¨me : Envoie les donnÃ©es au serveur Flask
   â†“
9. Serveur : InsÃ¨re dans la table "commandes"
   â†“
10. Serveur : GÃ©nÃ¨re le numÃ©ro CMD-20251020153045-789
   â†“
11. Serveur : RÃ©pond avec succÃ¨s
   â†“
12. Frontend : Affiche "Commande CMD-... enregistrÃ©e !"
   â†“
13. Frontend : Ouvre WhatsApp avec le message
   â†“
14. Client : Envoie le message sur WhatsApp
   â†“
15. Admin : Voit la nouvelle commande dans admin_commandes.html
   â†“
16. Admin : Change le statut en "En Cours"
   â†“
17. Admin : PrÃ©pare la commande
   â†“
18. Admin : Change le statut en "LivrÃ©e"
   â†“
19. FIN âœ…
```

---

## âœ… Checklist de Test

### **Tests Frontend**
- [ ] Page s'affiche correctement
- [ ] Connexion fonctionne
- [ ] Produits s'ajoutent au panier
- [ ] Panier s'ouvre/ferme
- [ ] Formulaire de commande se valide
- [ ] Notifications s'affichent
- [ ] WhatsApp s'ouvre avec le bon message
- [ ] Console affiche les bons logs

### **Tests Backend**
- [ ] Serveur dÃ©marre sans erreur
- [ ] Route POST /api/commandes fonctionne
- [ ] Insertion en BDD rÃ©ussie
- [ ] NumÃ©ro de commande gÃ©nÃ©rÃ©
- [ ] RÃ©ponse JSON correcte
- [ ] Logs serveur affichÃ©s

### **Tests Base de DonnÃ©es**
- [ ] Table commandes existe
- [ ] Commande insÃ©rÃ©e avec toutes les donnÃ©es
- [ ] Foreign key fonctionne
- [ ] Date auto-gÃ©nÃ©rÃ©e
- [ ] Statut par dÃ©faut = "en_attente"

### **Tests Interface Admin**
- [ ] Page admin s'affiche
- [ ] Statistiques correctes
- [ ] Commandes listÃ©es
- [ ] Recherche fonctionne
- [ ] Filtres fonctionnent
- [ ] Modal dÃ©tails s'affiche
- [ ] Changement de statut fonctionne
- [ ] Suppression fonctionne
- [ ] Auto-refresh fonctionne

---

## ğŸ¯ RÃ©sultats Attendus

### **Si tout fonctionne correctement :**

âœ… Commande enregistrÃ©e en BDD  
âœ… NumÃ©ro de commande gÃ©nÃ©rÃ©  
âœ… Notification de succÃ¨s affichÃ©e  
âœ… WhatsApp ouvert avec message  
âœ… Panier vidÃ©  
âœ… Commande visible dans admin  
âœ… Statut modifiable  
âœ… Console sans erreurs  

---

**ğŸ‰ Si tous les tests passent, votre systÃ¨me est 100% opÃ©rationnel !**
